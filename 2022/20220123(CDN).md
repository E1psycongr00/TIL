# 20220123(CDN)

작성일시: 2022년 1월 23일 오전 9:40

# 오늘 배운것

- **CDN (Content Delivery Network)이란?**
    - **클라우드** 서비스이다.
    - 전 세계 사용자들에게  지리적 제약 없이 **웹 콘텐츠를 효율적으로 제공 할 수 있는 서버의 분산 네트워크**이다.
    - 전세계 데이터 센터는 파일 복사본을 임시로 저장하는 방법(캐싱)을 사용한다.
    - CDN은 서버와 사용자간의 물리적 거리를 좁혀서 콘텐츠 로딩에 걸리는 시간을 최소화한다.
    - 각 지역에 캐시 서버를 분산 배치해 최종 사용자와 가까운 **POP(Point Of Presence)**위치의 서버에 캐시된 콘텐츠를 전달하여 대기시간을 최소화 한다.
        - ex) 미국에 있는 사용자가 한국에 호스팅된 웹 사이트에 접근하는 경우 미리 캐싱된 미국에 위치한 PoP 서버에서 웹사이트 콘텐츠를 사용자에게 전송한다.
        - POP란 인터넷 액세스 포인트 위치를 가르킨다. 그러므로 필수적으로 고유한 **IP 주소**를 가져야 한다.
- **CDN이 필요한 경우**
    - 동영상 스트리밍이나 그래픽 이미지, 동영상 파일 등 콘텐츠를 제공한다면  CDN을 활용하는것이 적절하다. 큰 용량 데이터를 서비스 하는 경우 CDN을 통해 빠르게 제공 할 수 있어 안정적으로 웹사이트를 운영 할 수 있다. 그러나 국소적으로 특정 국가나 지역만을 타깃으로 하는 경우 불필요한 연결 지점이 많아져 오히려 성능 하락을 일으킬 수 있다.
- **CDN 활용 사례**
    - **넷플릭스**
        - 넷플릭스는 전 세계 사용자들에게 안정적인 서비스를 제공하기 위해 2011년 자체 CDN을 구축했다.
            - 구독자 절반이 미국 외에 분포해 있고 동영상과 같은 큰 용량의 콘텐츠를 안정적이고 빠르게 전 세계에 제공해야 하기 때문이다.
    - **에어비엔비(Airbnb)**
        - 전 세계 고객들에게 언제 어디서나 숙박 시설과 각종 액티비티를 예약 할 수 있는 서비스 환경을 구축하기 위해 CDN 을 활용했다.
    - **NC 소프트, 카카오게임즈**
        - 온라인 게임 기업으로  큰 용량의 화면을 실시간으로 송출하고 관리해야 하는데 북미나 유럽과 같이 지리적으로 먼 지역의 사용자들에게 안정적고 빠른 서비스를 제공하기 위해 CDN 을 활용했다.

- **CDN의 아키텍쳐**
    - **Push 방식**
        - 원본 서버가 새로 업로드된 콘텐츠를 전 세계에 위치한 PoP 서버로 전달하는 방식
        - 최초 구성 및 설정에 비교적 많은 시간이 걸리지만 적시에 콘텐츠를 제공 할 수 있고 콘텐츠가 업로드 되거나 업데이트 되더라도 오류가 적은 장점이 있다.
    - **Pull 방식**
        - 원본 서버에서 콘텐츠를 가져오는 방식
        - JavaScript나 CSS, HTML 파일과 같이 비교적 사이즈가 작은 파일에 주로 활용된다.
        - 단점은 웹페이지를 처음 방문하는 경우 PoP서버가 Origin 서버에서 데이터를 가져오는 과정이 필요하기 때문에 때때로 응답속도가 느려지는 경우가 있다.
        - 최초 POP 구성이 쉽고 사용자 요청이 있는 경우만 데이터를 가져오기 때문에 자원을 절약 할 수 있다.

- **CDN 아키텍처**
    - **분산형 아키텍처(Scattered Architecture)**
        - 비교적 낮은 사양의 서버로 구성
        - PoP 서버 여러개를 밀접해 운영해 사용자와 서버간 물리적 거리를 최소화해 빠른 응답을 기대 할 수 있음.
        - 하지만 POP가 많아 지는 경우 오히려 비용이 커지고 병목현상이 발생 할 우려가 있음
    - **통합형 아키텍처(Consolidated Architecture)**
        - 고용량의 서버로 소수의 POP를 주요 데이터 센터에 배치에 운영하는 방식
        - 운영하는 POP 수가 분산형보다 적기 때문에 비용을 절감 할 수 있고 보안상 이점이 있다.
        - 고용량 pop의 경우 분산형보다 복잡성이 높고 배포 하는 데 상대적으로 오랜 시간이 걸린다.
        - 가격이 비싸기 때문에 신속하게 네트워크를 확장하기엔 어려움이 있다.

# 오늘 느낀점

- html 에서 font awesome 사이트를 통해 아이콘을 가져오는데 CDN이 활용 된다고 했다. 콘텐츠 딜리버리 네트워크 ... 뭐지?? 했는데 전국 POP 서버에 데이터를 캐싱해 빠르게 어느 지역에 있는 빠르게 가져오는 클라우드 기술이란 것을 알게 되었다. 확실히 CDN 기술은 거리의 제약을 사라지게 하고 좀더 편리하고 안정적이게 서비스 할 수 있는 것 같다.
- font awesome에서 가져온 cdn 방식은 pull 방식이다. 실제로 실행해보면 처음 사이트 접속이 아이콘이 다른 html 태그에 비해 늦게 로딩이 된다. 왜 html,css, js에는 이런 방식을 쓸 까 고민해 봤는데 웹사이트 제작이 불특정하고 서비스 사용자가 완전 명확하지 않아서 그런 것 같다. 회사가 서비스를 직접 사용자에게 제공해주는게 아니라 ... 너희가 필요하면 가져다 써.... 이런 느낌?

# 참고 사이트

왠만한 font 이미지가 다 있는 사이트

[Font Awesome](https://fontawesome.com/v5.15/icons/bars?style=solid)